<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>step13</title>
<meta name="viewport" content="width=device-width, user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<link rel="stylesheet" type="text/css" href="style.css">
<script>
var canvas = null;
var ctx = null;
var startButton = null;
var clearButton = null;
// 画像を格納する配列
var images = [];
// 読み込む画像のファイル配列
var files = ['A','B','C','D','E','F','G','H','I',];

window.onload = init;

function init() {
  canvas = document.getElementById('canvas');
  ctx = canvas.getContext('2d');
  prepareImages();
  clear();
  startButton = document.getElementById('start');
  startButton.onclick = start;
  clearButton = document.getElementById('clear');
  clearButton.onclick = clear;
}

function clear() {
  ctx.fillStyle = 'rgb(255,255,255)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function start() {
  draw();
}

function prepareImages() {
  // 画像を配列から読み込む
  for ( var i in files ) {
    var image = new Image();
    image.src = './../images/' + files[i] + '.png';
    images.push(image);
  }
}

function draw() {
  // いったん背景色をクリアする
  clear();
  
  // 画像の左上のX座標
  var x = 0;
  // 画像の左上のY座標
  var y = 0;
  // 表示する画像の幅
  var w = 90;
  // 表示する画像の高さ
  var h = 90;
  
  for ( var i in images ) {
    // 画像を順番に表示する
    ctx.drawImage(images[i],x,y,w,h);
    // 次の画像のX座標を画像の幅だけ移動する
    x += w;
    // 1行に3枚なので、「3」の剰余が「2」であれば改行する
    if( i % 3 == 2 ) {
      // 改行するのでX座標を「0」にする
      x = 0;
      // 改行するのでY座標を画像の高さだけ移動する
      y += h;
    }
  }
}
</script>
</head>
<body>
<div id="container">
  <h1>画面を分割して画像を表示</h1>
  <canvas id="canvas" width="270px" height="270px"></canvas>
  <div id="control">
    <button id="start">スタート</button>
    <button id="clear">クリア</button>
  <div>
</div>
</body>
</html>
