<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>work06</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script>
var canvas = null;
var ctx = null;
var ball = null;

window.onload = init;

function init() {
  // canvasを取得
  canvas = document.getElementById('canvas');
  canvas.onclick = drawOnClickedPosition;
  ctx = canvas.getContext('2d');
  prepareImages();
  clear();
}

function clear() {
  // 背景色を白で塗りつぶす
  ctx.fillStyle = 'rgb(255,255,255)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function prepareImages() {
  // 画像の読み込み
  ball = new Image();
  ball.src = '../images/ball.png';
}

function drawOnClickedPosition(event) {
  // クリックされた位置を取得します
  var position = getClickedPosition(event);
  // いったん背景色をクリアします
  clear();
  // クリックされた位置を画像の中心にするために座標の調整をします
  var x = position.x - 20;
  var y = position.y - 20;
  // キャンバスの左上に40×40の大きさで画像を描きます
  ctx.drawImage(ball,x,y,40,40);
}

function getClickedPosition(event) {
  // キャンバスの左上からx座標
  var xBase  = canvas.offsetLeft;
  // キャンバスの左上からのy座標
  var yBase  = canvas.offsetTop;
  // キャンバス内のクリックされたのx座標
  var x = event.pageX - xBase;
  // キャンバス内のクリックされたのy座標
  var y = event.pageY - yBase;
  return {"x":x,"y":y};
}
</script>
</head>
<body>
<div id="container">
  <h1>クリックした場所に画像を表示</h1>
  <canvas id="canvas" width="300px" height="300px"></canvas>
</div>
</body>
</html>
