<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>work11</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script>
var canvas = null;
var ctx = null;
var robot = null;
var timer = null;
var x = 0;
var y = 0;
var dx = 25;
var dy = 25;
var image_width = 50;
var image_height = 50;

window.onload = init;
window.onkeydown = keyDown;

function init() {
  canvas = document.getElementById('canvas');
  ctx = canvas.getContext('2d');
  prepareImages();
  clear();
}

function clear() {
  ctx.fillStyle = 'rgb(255,255,255)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function prepareImages() {
  robot = new Image();
  robot.src = './../images/robot6.png';
  robot.onload = start;
}

function draw() {
  clear();
  ctx.drawImage(robot,x,y,image_width,image_height);
}

function start() {
  x = canvas.width / 2 - image_width / 2;
  y = canvas.height / 2 - image_height / 2;
  if( timer != null ) {
    return;
  }
  timer = setInterval(draw,30);
}

function keyDown(event) {
  // 左端
  if( event.keyCode == 37 && x-dx >= 0 ) {
    x -= dx;
  }
  // 上端
  if( event.keyCode == 38 && y-dy >= 0 ) {
    y -= dy;
  }
  // 右端
  if( event.keyCode == 39 && x + image_width < canvas.width ) {
    x += dx;
  }
  // 下端
  if( event.keyCode == 40 && y + image_height < canvas.height ) {
    y += dy;
  }
}
</script>
</head>
<body>
<div id="container">
  <h1>カーソルキーで画像が移動</h1>
  <canvas id="canvas" width="300px" height="300px"></canvas>
</div>
</body>
</html>
