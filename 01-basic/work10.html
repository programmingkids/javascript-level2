<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>work10</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script>
var canvas = null;
var ctx = null;
var ball = null;
var timer = null;
var x = 0;
var y = 0;
var dx = 15;
var dy = 5;
var startButton = null;
var stopButton = null;

window.onload = init;

function init() {
  canvas = document.getElementById('canvas');
  ctx = canvas.getContext('2d');
  prepareImages();
  clear();
  startButton = document.getElementById('start');
  startButton.onclick = start;
  stopButton = document.getElementById('stop');
  stopButton.onclick = stop;
}

function clear() {
  ctx.fillStyle = 'rgb(255,255,255)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function prepareImages() {
  ball = new Image();
  ball.src = './../images/ball.png';
}

function start() {
  if( timer != null ) {
    return;
  }
  timer = setInterval(draw,30);
}

function stop() {
  clearInterval(timer);
  timer = null;
}

function draw() {
  clear();
  
  if( x + 40 >= canvas.width ) {
    x = canvas.width - 40;
    dx = -dx;
  }
  
  if( x <= 0 ) {
    x = 0;
    dx = -dx;
  }
  // ここから処理を作成します
  if( y + 40 >= canvas.height ) {
    y = canvas.height - 40;
    dy = -dy;
  }
  
  if( y <= 0 ) {
    y = 0;
    dy = -dy;
  }
  
  x += dx;
  y += dy;
  ctx.drawImage(ball,x,y,40,40);
}
</script>
</head>
<body>
<div id="container">
  <h1>キャンバス内を画像が移動</h1>
  <canvas id="canvas" width="320px" height="320px"></canvas>
  <div id="control">
    <button id="start">スタート</button>
    <button id="stop">停止</button>
  <div>
</div>
</body>
</html>
